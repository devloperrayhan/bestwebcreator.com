<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Example page for selectBoxUI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <link href="css/selectbox-ui.css" rel="stylesheet">
    <style>
      html, body {
        padding: 20px;
      }
      .example {
          border: 1px solid #ccc;
          padding: 20px;
          margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <div>
    <h1>Example for the selectBoxUI library</h1>
    <p>Get to the sides of the images (or the corners) and grab them to change the selectbox user interface.</p>
    <p>(*) the library just adds the user interface for select-like operations over images (or any object)</p>
    <div class="example" data-showsource>
      <h2>Simple example</h2>
      <p><span class="fw-bold">hint:</span> add the <span class="fw-bold">data-selectboxui</span> attribute, and we use <span class="fw-bold">data-selectboxui-initial-box</span> to add an initial select box.</p>
      <div class="d-flex">
        <img src="https://picsum.photos/400/200" class="mx-auto"
          data-selectboxui 
          data-selectboxui-initial-box="25%">
      </div>
    </div>
    <div class="example" data-showsource>
      <h2>Example of multiple elements (one declarative and the other programmatically)</h2>
      <p>the first image adds the <span class="fw-bold">data-selectboxui</span> attribute, but the second is created programmatically</p>
      <div class="d-flex">
          <img src="https://picsum.photos/300/200" class="ms-auto" data-selectboxui data-selectboxui-initial-box="25%">
          <img src="https://picsum.photos/200/200" id="second" class="me-auto ms-5 sb-borders-fixed" data-selectboxui-initial-box="25%">
      </div>
      <script>
      document.addEventListener('DOMContentLoaded', function() {
        let image = document.querySelector('#second');
        selectBoxUI(image);
      });
      </script>
    </div>
    <div class="example" data-showsource>
      <h2>Example of an arbitraty object (e.g. a form)</h2>
      <p>The library should be able to add the SelectBox user interface to any object in the DOM. In this case we have removed the central part (i.e. the focus part) using the <span class="fw-bold">data-selectboxui-no-focus</span></p>
      <form class="w-50 mx-auto" data-selectboxui data-selectboxui-initial-box="10%" data-selectboxui-no-focus data-selectboxui-wrapper-class="m-5">
        <label class="form-label">Name</label>
        <input type="text" class="form-control" placeholder="First name" aria-label="First name">
        <label class="form-label">Last name</label>
        <input type="text" class="form-control" placeholder="Last name" aria-label="Last name">
        <label class="form-label">Address</label>
        <input type="text" class="form-control" placeholder="Address" aria-label="Address">
      </form>
    </div>
    <div class="example" data-showsource>
      <h2>Example of a iframe</h2>
      <p>This is a more complex example in which we create the selectBoxUI using the declarative method (i.e. adding the <span class="fw-bold">data-selectboxui</span> attribute), and later we can read the <span class="fw-bold">selectBoxUI</span> attribute from the element to apply methods or to get the position of the box. We have also included two event listeners for <span class="fw-bold">selectboxui:hide</span> and <span class="fw-bold">selectboxui:show</span> events.</p>
      <div class="container my-3">
        <iframe class="mx-auto" data-selectboxui data-selectboxui-initial-box="25%"
          on-selectboxui:hide="console.log('hide')"
          on-selectboxui:show="this.selectBoxUI.bounce(); console.log('show')"
          src="https://www.youtube.com/embed/9bZkp7q19f0" width="560" height="315" frameborder="0"></iframe>
        <div class="d-flex">
          <div class="mx-auto mt-3 btn-group">
            <input type="checkbox" id="selectbutton-visible" class="btn-check" checked></input>
            <label class="btn btn-outline-primary" for="selectbutton-visible"><i class="bi bi-crop"></i></label>
            <input type="checkbox" id="selectbutton-enable" class="btn-check"></input>
            <label class="btn btn-outline-primary" for="selectbutton-enable"><i class="bi bi-dash-circle"></i></label>
            <button class="btn btn-outline-primary" onclick="alert(JSON.stringify(document.querySelector('iframe').selectBoxUI.get()))"><i class="bi bi-info-circle"></i></button>
          </div>
        </div>
      </div>
      <script>
      document.getElementById('selectbutton-visible').addEventListener('change', function() {
        let el = document.querySelector('iframe');
        if (this.checked) {
          el.selectBoxUI.show();
        } else {
          el.selectBoxUI.hide();
        }
      });
      document.getElementById('selectbutton-enable').addEventListener('change', function() {
        let el = document.querySelector('iframe');
        if (this.checked) {
          el.selectBoxUI.disable();
        } else {
          el.selectBoxUI.enable();
        }
      });
      </script>      
    </div>
  </div>
</body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/dealfonso/showsource@1.1/dist/showsource.js"></script>
  <script>
    showsource.defaults.separateElements = "data-* on-*";
    showsource.defaults.maxAttributesPerLine = 3;
  </script>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="js/selectbox-ui.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      hljs.highlightAll();
    });
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('*').forEach(function(el) {
        // If any attribute starts with on- (e.g. on-click, on-selectboxui-changed, etc.) get the rest and add an event listener
        Object.keys(el.attributes).forEach(function(key) {
          let attr = el.attributes[key];
          if (attr.name.startsWith('on-')) {
            let event = attr.name.substring(3);
            el.addEventListener(event, function(e) {
              eval(attr.value);
            });
          }
        });
      });
    });
</script>
</html>